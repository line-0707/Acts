<!DOCTYPE html>
<html lang="ru">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" type="image/x-icon" href="acts.ico">
	<title>Информационная Сайта</title>
	<script src="index.js"></script>
	<style>
		body {
			margin: 0;
			display: flex;
			flex-direction: column;
			height: 100vh;
		}

		#pdfContainer {
			height: calc(100% - 45px);
			/* 下部余白 60px を引く */
		}

		iframe {
			width: 100%;
			height: 100%;
			border: none;
		}

		/* 下部余白部分 */
		#bottomBar {
			height: 45px;
			/* 下部の余白 */
			display: flex;
			align-items: center;
			justify-content: flex-end;
			padding-right: 20px;
			background: #f0f0f0;
			box-sizing: border-box;
		}

		#bottomBar label {
			margin-right: 5px;
			font-weight: bold;
		}
	</style>
</head>

<body>
	<!-- PDF iframeを2枚重ねてクロスフェード -->
	<div id="pdfContainer" style="position:relative; height:calc(100vh - 60px);">
		<iframe id="pdfFrame" style="width:100%; height:100%; border:none;"></iframe>
		<iframe id="pdfBackup"
			style="width:100%; height:100%; border:none; position:absolute; top:0; left:0; display:none; opacity:0;"></iframe>
	</div>

	<!-- 下部余白部分にプルダウン配置 -->
	<div id="bottomBar">
		<label for="languageSelector">Language:</label>
		<select id="languageSelector" onchange="changeLanguage(this.value)">
			<option value="ru">Русский</option>
			<option value="en">English</option>
			<option value="ja">日本語</option>
		</select>
	</div>

<script>
	let front = document.getElementById('pdfFrame');
	let back = document.getElementById('pdfBackup');

	// 初期PDF表示
	front.src = 'https://line-0707.github.io/Acts/pdfviewer/web/viewer.html?file='
		+ encodeURIComponent('https://line-0707.github.io/Acts/source/index.pdf')
		+ '#toolbar=0&navpanes=0';

	function changeLanguage(lang) {
		let pdfUrl;
		let titleText;

		switch (lang) {
			case 'ru':
				pdfUrl = 'https://line-0707.github.io/Acts/source/index.pdf';
				titleText = 'Информационная Сайта';
				break;
			case 'en':
				pdfUrl = 'https://line-0707.github.io/Acts/source/index_en.pdf';
				titleText = 'Information Site';
				break;
			case 'ja':
				pdfUrl = 'https://line-0707.github.io/Acts/source/index_ja.pdf';
				titleText = 'Information';
				break;
			default:
				pdfUrl = 'https://line-0707.github.io/Acts/source/index.pdf';
				titleText = 'Информационная Сайта';
		}

		// 新しいPDFをバックiframeに読み込む
		back.src = 'https://line-0707.github.io/Acts/pdfviewer/web/viewer.html?file='
			+ encodeURIComponent(pdfUrl) + '#toolbar=0&navpanes=0';

		back.style.display = 'block';   // ここを追加
		back.style.opacity = 0;
		back.style.transition = 'opacity 0.5s';

		back.onload = () => {
			requestAnimationFrame(() => {
				back.style.opacity = 1;
				front.style.opacity = 0;
			});

			setTimeout(() => {
				front.src = back.src;
				front.style.opacity = 1;
				back.style.display = 'none';
			}, 500);
		};

		// ページタイトル切替
		document.title = titleText;
	}
</script>

</body>

</html>