<!DOCTYPE html>
<html lang="ru">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Информационная Сайта</title>
	<style>
		html,
		body {
			margin: 0;
			padding: 0;
			height: 100%;
		}

		/* 上部バー */
		#topBar {
			height: 45px;
			display: flex;
			align-items: center;
			justify-content: flex-end;
			padding-right: 20px;
			background: #f0f0f0;
			box-sizing: border-box;
		}

		#topBar label {
			margin-right: 5px;
			font-weight: bold;
		}

		/* PDFコンテナ */
		#pdfContainer {
			position: relative;
			height: calc(100% - 45px);
			/* 上部バーの高さを引く */
		}

		#pdfContainer iframe {
			width: 100%;
			height: 100%;
			border: none;
			position: absolute;
			top: 0;
			left: 0;
		}
	</style>
</head>

<body>

	<!-- 上部バーにプルダウン -->
	<div id="topBar">
		<label for="languageSelector">Language:</label>
		<select id="languageSelector" onchange="changeLanguage(this.value)">
			<option value="ru">Русский</option>
			<option value="en">English</option>
			<option value="ja">日本語</option>
		</select>
	</div>

	<!-- PDF表示（クロスフェード用に2枚） -->
	<div id="pdfContainer">
		<iframe id="pdfFrame"></iframe>
		<iframe id="pdfBackup" style="display:none; opacity:0;"></iframe>
	</div>

	<script>
		let front = document.getElementById('pdfFrame');
		let back = document.getElementById('pdfBackup');

		// 初期PDF表示
		front.src = 'https://line-0707.github.io/Acts/pdfviewer/web/viewer.html?file='
			+ encodeURIComponent('https://line-0707.github.io/Acts/source/index.pdf')
			+ '#toolbar=0&navpanes=0';

		function changeLanguage(lang) {
			let pdfUrl;
			let titleText;

			switch (lang) {
				case 'ru':
					pdfUrl = 'https://line-0707.github.io/Acts/source/index.pdf';
					titleText = 'Информационная Сайта';
					break;
				case 'en':
					pdfUrl = 'https://line-0707.github.io/Acts/source/index_en.pdf';
					titleText = 'Information Site';
					break;
				case 'ja':
					pdfUrl = 'https://line-0707.github.io/Acts/source/index_ja.pdf';
					titleText = 'Information';
					break;
				default:
					pdfUrl = 'https://line-0707.github.io/Acts/source/index.pdf';
					titleText = 'Информационная Сайта';
			}

			// バックiframeに新しいPDFを読み込む
			back.src = 'https://line-0707.github.io/Acts/pdfviewer/web/viewer.html?file='
				+ encodeURIComponent(pdfUrl) + '#toolbar=0&navpanes=0';

			back.style.display = 'block';
			back.style.opacity = 0;
			back.style.transition = 'opacity 0.5s';

			back.onload = () => {
				requestAnimationFrame(() => {
					back.style.opacity = 1;
					front.style.opacity = 0;
				});

				setTimeout(() => {
					front.src = back.src;
					front.style.opacity = 1;
					back.style.display = 'none';
				}, 500);
			};

			document.title = titleText;
		}
	</script>

</body>

</html>