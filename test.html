<!doctype html>
<html lang="ru">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ИНФОРМАЦИОННАЯ САЙТА — Документы</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <style>
    :root {
      --bg: #f7f8fb;
      --card-light: rgba(255, 255, 255, 0.95);
      --card-dark: rgba(6, 8, 15, 0.65);
      --the: #6b7280;
      --accent: #0f172a;
      --header-bg-light: rgba(255, 255, 255, 0.85);
      --header-bg-dark: rgba(0, 0, 0, 0.5);
      --subcat-bg-light: rgba(238, 242, 247, 0.85);
      --subcat-bg-dark: rgba(255, 255, 255, 0.03);
      --title-color-light: #000;
      --title-color-dark: #fff;
      --stroke: #ffffff;
      --link-light: #0366d6;
      --link-dark: #5ab6ff;
    }

    /* 修正箇所：背景の指定方法を変更 */
    html {
      min-height: 100%;
      background: var(--bg) url('source/light.jpg') center/cover no-repeat;
      /* 背景をhtml要素に設定 */
      transition: background 0.3s ease;
    }

    body {
      min-height: 100%;
      margin: 0;
      font-family: 'Noto Sans JP', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      /* body自体の背景は設定せず、親であるhtmlの背景を透過表示させる */
    }

    /* 修正箇所：ダークモードの背景もhtml要素に適用 */
    .dark html {
      background-image: url('source/dark.jpg');
      background-color: #071024;
    }

    .wrap {
      max-width: 980px;
      margin: 0 auto;
      padding: 18px;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .logo {
      width: 72px;
      height: 72px;
      border-radius: 50%;
      overflow: hidden;
      background: #e6eef9;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .logo img {
      width: auto;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .title-block {
      display: flex;
      flex-direction: column;
      justify-content: left;
      height: 72px;
      text-align: left;
      flex-grow: 1;
    }

    .title-block-inner {
      display: flex;
      flex-direction: column;
      justify-content: center;
      height: 100%;
    }

    .title-block h1,
    .title-block .lead {
      text-shadow: 1.5px 0 0 var(--stroke), -1.5px 0 0 var(--stroke), 0 1.5px 0 var(--stroke),
        0 -1.5px 0 var(--stroke), 1.05px 1.05px 0 var(--stroke), -1.05px 1.05px 0 var(--stroke),
        1.05px -1.05px 0 var(--stroke), -1.05px -1.05px 0 var(--stroke);
    }

    h1 {
      font-size: 20px;
      margin: 0;
    }

    p.lead {
      margin: 4px 0 0;
      font-size: 14px;
    }

    .lang-select select {
      padding: 6px 8px;
      border-radius: 6px;
      border: 1px solid #d1d5db;
      font-size: 13px;
      background: #e5e7eb;
      color: #111827;
      cursor: pointer;
    }

    .card {
      padding: 18px;
      border-radius: 12px;
      box-shadow: 0 6px 18px rgba(15, 23, 42, 0.04);
      background: var(--card-light);
      transition: background 0.3s ease;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 12px;
      transition: color 0.3s ease, background 0.3s ease;
      color: #0b1220;
      table-layout: fixed;
      /* 文字のはみ出しを防止 */
    }

    th,
    td {
      padding: 10px 12px;
      text-align: left;
      font-size: 14px;
      vertical-align: middle;
      overflow-wrap: break-word;
      /* 文字のはみ出しを防止 */
    }

    /* 各列の幅を設定 */
    #col-file {
      width: 55%;
    }

    #col-status {
      width: 20%;
    }

    #col-update {
      width: 25%;
    }


    th {
      background: var(--header-bg-light);
      font-weight: 700;
      color: var(--muted);
      font-size: 13px;
    }

    tr.subcat td {
      background: var(--subcat-bg-light);
      color: var(--accent);
      font-weight: 600;
    }

    tr.divider td {
      border: none;
      padding: 0;
    }

    tr.divider td hr {
      border: none;
      border-top: 1px solid #e5e7eb;
      margin: 8px 0;
    }

    td.status {
      white-space: nowrap;
      border-radius: 6px;
      padding: 6px 10px;
      display: inline-block;
    }

    /* light mode status colors */
    td.status.available {
      background: #d1fae5;
      color: #065f46;
      font-weight: 600;
    }

    td.status.limited {
      background: #fef9c3;
      color: #92400e;
      font-weight: 600;
    }

    td.status.expired,
    td.status.unavailable,
    td.status.progress {
      background: #fecaca;
      color: #991b1b;
      font-weight: 600;
    }

    td a {
      color: var(--link-light);
      text-decoration: none;
      transition: color 0.3s ease;
    }

    td a:hover {
      text-decoration: underline;
    }

    .title-link {
      color: inherit;
      text-decoration: none;
    }

    /* 3年目リンク専用: 下線なし、取り消し線あり、ライトモード黒／ダークモード白 */
    a.broken-link {
      text-decoration: line-through;
      cursor: default;
      color: #000000 !important;
    }

    .dark a.broken-link {
      color: #ffffff !important;
    }

    footer {
      margin-top: 18px;
      font-size: 13px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: #fff !important;
      background: rgba(0, 0, 0, 0.5);
      padding: 4px 8px;
      border-radius: 4px;
    }

    footer .last-update,
    footer #author-text {
      color: #fff !important;
      text-shadow: none !important;
    }

    .theme-toggle {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      cursor: pointer;
      background: var(--card-light);
      color: var(--accent);
      font-size: 24px;
      border: none;
      margin-right: 8px;
      transition: background 0.3s ease, color 0.3s ease;
    }

    /* Dark mode styles */
    .dark {
      background: #071024 url('source/dark.jpg') center/cover no-repeat;
    }

    .dark .card {
      background: var(--card-dark);
    }

    .dark table {
      color: #e6eef8;
    }

    .dark th {
      background: var(--header-bg-dark);
      color: #e6eef8;
    }

    .dark tr.subcat td {
      background: var(--subcat-bg-dark);
      color: #e6eef8;
    }

    .dark td a {
      color: var(--link-dark);
    }

    .dark .theme-toggle {
      background: var(--card-dark);
      color: #fff;
    }

    .dark #note-text {
      color: #e5e7eb;
    }

    /* ステータスの色付き中黒をライト/ダーク両方で表示 */
    td.status::before {
      content: '●';
      display: inline-block;
      margin-right: 8px;
      font-size: 0.85em;
      vertical-align: middle;
      opacity: 0.95;
    }

    td.status.available::before {
      color: #10b981;
    }

    td.status.limited::before {
      color: #f59e0b;
    }

    td.status.expired::before,
    td.status.unavailable::before,
    td.status.progress::before {
      color: #ef4444;
    }

    /* ダークモードでは背景は控えめに */
    .dark td.status.available {
      background: rgba(16, 185, 129, 0.12);
      color: #d1fae5;
      font-weight: 700;
    }

    .dark td.status.limited {
      background: rgba(245, 158, 11, 0.10);
      color: #ffedd5;
      font-weight: 700;
    }

    .dark td.status.expired,
    .dark td.status.unavailable,
    .dark td.status.progress {
      background: rgba(239, 68, 68, 0.10);
      color: #ffecec;
      font-weight: 700;
    }

    @media (max-width:640px) {
      .logo {
        width: 56px;
        height: 56px;
      }

      th,
      td {
        padding: 8px;
      }

      header {
        gap: 10px;
        flex-direction: column;
      }

      .title-block {
        text-align: center;
      }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <a href="#" class="logo" aria-hidden="true"><img src="source/icon.webp" alt="ИНФ"></a>
      <div class="title-block">
        <div class="title-block-inner">
          <a href="#" class="title-link">
            <h1 id="page-title" data-translate="page-title">ИНФОРМАЦИОННАЯ САЙТА</h1>
          </a>
          <p class="lead" id="page-subtitle" data-translate="page-subtitle">Сводка опубликованных документов и ресурсов
          </p>
        </div>
      </div>
      <div style="display:flex; align-items:center; gap:4px;">
        <button class="theme-toggle" id="theme-btn" aria-label="Toggle theme">
          <span class="material-icons" id="theme-icon">light_mode</span>
        </button>
        <div class="lang-select">
          <select id="lang-select" aria-label="Language selector">
            <option value="ru">Русский</option>
            <option value="en">English</option>
            <option value="ja">日本語</option>
          </select>
        </div>
      </div>
    </header>

    <section class="card">
      <table aria-label="Документы" id="docs-table">
        <thead>
          <tr>
            <th id="col-file" data-translate="col-file">Файлы</th>
            <th id="col-status" data-translate="col-status">Статус</th>
            <th id="col-update" data-translate="col-update">Последнее обновление</th>
          </tr>
        </thead>
        <tbody>
          <tr data-translate-row="1">
            <td data-translate="file-1"><a href="https://line-0707.github.io/Acts/cons_latest.html" target="_blank"
                rel="noopener">Основой Закон — 7-е издание</a></td>
            <td class="status available" data-translate="status-1">Доступный</td>
            <td data-translate="date-1" data-date="2025-06-28">28 июня 2025г.</td>
          </tr>
          <tr class="divider">
            <td colspan="3">
              <hr>
            </td>
          </tr>
          <tr class="subcat" data-translate-row="subcat-1">
            <td data-translate="subcat-1" colspan="3">Результаты моих экзаменов</td>
          </tr>
          <tr data-translate-row="8">
            <td data-translate="file-8"><a href="#">В средней школе</a></td>
            <td class="status limited" data-translate="status-8">Ограниченный доступ</td>
            <td data-translate="date-8" data-date="2024-06-02">2 июня 2024г.</td>
          </tr>
          <tr data-translate-row="2">
            <td data-translate="file-2"><a href="#">В мой 1-й год обучения в старшей школе</a></td>
            <td class="status available" data-translate="status-2">Доступный</td>
            <td data-translate="date-2" data-date="2025-03-25">25 марта 2025г.</td>
          </tr>
          <tr data-translate-row="3">
            <td data-translate="file-3"><a href="#">В мой 2-й год обучения в старшей школе</a></td>
            <td class="status available" data-translate="status-3">Доступный</td>
            <td data-translate="date-3" data-date="2025-06-27">27 июня 2025г.</td>
          </tr>
          <tr data-translate-row="4">
            <td data-translate="file-4">
              <a href="#" class="broken-link" onclick="event.preventDefault();" aria-disabled="true">В мой 3-й год
                обучения в старшей школе</a>
            </td>
            <td class="status unavailable" data-translate="status-4">нет в наличии<sup>1</sup></td>
            <td data-translate="date-4">—</td>
          </tr>
          <tr class="divider">
            <td colspan="3">
              <hr>
            </td>
          </tr>
          <tr data-translate-row="5">
            <td data-translate="file-5"><a href="#">Временные или специальные законы</a></td>
            <td class="status expired" data-translate="status-5">Истекший</td>
            <td data-translate="date-5" data-date="2025-03-05">5 марта 2025г.</td>
          </tr>
          <tr data-translate-row="6">
            <td data-translate="file-6"><a href="#">Номер 3: об использовании социальных сетей</a></td>
            <td class="status available" data-translate="status-6">Доступно / Архив</td>
            <td data-translate="date-6" data-date="2025-03-05">5 марта 2025г.</td>
          </tr>
          <tr class="divider">
            <td colspan="3">
              <hr>
            </td>
          </tr>
          <tr data-translate-row="7">
            <td data-translate="file-7"><a href="#">Телеканал «Интервидение»</a></td>
            <td class="status progress" data-translate="status-7">Работа в процессе</td>
            <td data-translate="date-7">—</td>
          </tr>
        </tbody>
      </table>
      <div style="margin-top:12px" class="muted" id="note-text" data-translate="note-1">1. Некоторые данные отсутствуют.
        Исправлений нет.</div>
    </section>

    <footer class="muted">
      <span id="author-text" data-translate="author">Создано: Юя Камошита с ChatGPT</span>
      <span class="last-update" id="auto-last">—</span>
    </footer>
  </div>

  <script>
    const themeBtn = document.getElementById('theme-btn');
    const themeIcon = document.getElementById('theme-icon');
    const langSelect = document.getElementById('lang-select');
    let currentLang = 'ru';
    function setTheme(theme) {
      if (theme === 'dark') {
        document.documentElement.classList.add('dark');
        themeIcon.textContent = 'dark_mode';
        themeIcon.style.color = '#ffffff';
      } else {
        document.documentElement.classList.remove('dark');
        themeIcon.textContent = 'light_mode';
        themeIcon.style.color = '#0f172a';
      }
    }
    themeBtn.addEventListener('click', () => {
      setTheme(document.documentElement.classList.contains('dark') ? 'light' : 'dark');
    });
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    setTheme(prefersDark ? 'dark' : 'light');
    function formatDisplayDate(dateInput, lang = 'ru', withTime = false) {
      const d = new Date(dateInput);
      if (isNaN(d.getTime())) return dateInput;
      const day = d.getDate();
      const year = d.getFullYear();
      const hours = d.getHours().toString().padStart(2, '0');
      const minutes = d.getMinutes().toString().padStart(2, '0');
      if (lang === 'ru') {
        const monthName = new Intl.DateTimeFormat('ru', { month: 'long' }).format(d);
        const datePart = `${day} ${monthName} ${year}г.`;
        return withTime ? `${datePart}, ${hours}:${minutes}` : datePart;
      } else if (lang === 'en') {
        const datePart = new Intl.DateTimeFormat('en-US', { month: 'long', day: 'numeric', year: 'numeric' }).format(d);
        return withTime ? `${datePart}, ${hours}:${minutes}` : datePart;
      } else if (lang === 'ja') {
        const month = d.getMonth() + 1;
        const datePart = `${year}年${month}月${day}日`;
        return withTime ? `${datePart} ${hours}:${minutes}` : datePart;
      } else {
        return withTime ? `${d.toLocaleString(lang)}` : `${d.toLocaleDateString(lang)}`;
      }
    }
    function setPreserveInlineChildren(el, text) {
      if (!el) return;
      const a = el.querySelector('a'); if (a) { a.textContent = text; return; }
      const s = el.querySelector('s'); if (s) { s.textContent = text; return; }
      const sup = el.querySelector('sup');
      if (sup) {
        const rest = Array.from(el.children).filter(ch => ch.tagName === 'SUP').map(ch => ch.outerHTML).join('');
        el.innerHTML = text + rest; return;
      }
      el.textContent = text;
    }
    function updateLastModified(lang = currentLang) {
      const lastModRaw = document.lastModified;
      const lastModDate = new Date(lastModRaw);
      const fallback = new Date();
      const finalDate = isNaN(lastModDate.getTime()) ? fallback : lastModDate;
      const prefix = { ru: 'Последнее обновление:', en: 'Last updated:', ja: '最終更新：' }[lang] || 'Last updated:';
      document.getElementById('auto-last').textContent = `${prefix} ${formatDisplayDate(finalDate.toISOString(), lang, true)}`;
    }
    const translations = {
      en: { 'page-title': 'INFORMATION SITE', 'page-subtitle': 'Summary of published documents and resources', 'col-file': 'Files', 'col-status': 'Status', 'col-update': 'Last update', 'file-1': 'Basic Law — 7th edition', 'status-1': 'Available', 'file-2': 'In my 1st year of high school', 'status-2': 'Available', 'file-3': 'In my 2nd year of high school', 'status-3': 'Available', 'file-4': 'In my 3rd year of high school', 'status-4': 'Unavailable', 'file-5': 'Temporary or special laws', 'status-5': 'Expired', 'file-6': 'No.3: on social network usage', 'status-6': 'Available / Archive', 'file-7': 'TV Channel "Intervision"', 'status-7': 'In progress', 'note-1': '1. Some data is missing. No corrections.', 'author': 'Created by Yuya Kamoshita with ChatGPT', 'file-8': 'In middle school', 'status-8': 'Limited access', 'subcat-1': 'My exam results' },
      ja: { 'page-title': 'Information', 'page-subtitle': '公開された資料とリソースの一覧', 'col-file': 'ファイル', 'col-status': 'ステータス', 'col-update': '最終更新日', 'file-1': '基本法 — 第7版', 'status-1': '利用可能', 'file-2': '高校1年次', 'status-2': '利用可能', 'file-3': '高校2年次', 'status-3': '利用可能', 'file-4': '高校3年次', 'status-4': '利用不可', 'file-5': '臨時または特別法', 'status-5': '期限切れ', 'file-6': '第3号：SNS利用について', 'status-6': '利用可能 / アーカイブ', 'file-7': 'テレビチャンネル「インタービジョン」', 'status-7': '作業中', 'note-1': '1. 一部のデータは欠落しています。修正はありません。', 'author': '作者：鴨下友哉&ChatGPT使用', 'file-8': '中学生時代', 'status-8': '制限あり', 'subcat-1': '私の試験結果' },
      ru: { 'page-title': 'ИНФОРМАЦИОННАЯ САЙТА', 'page-subtitle': 'Сводка опубликованных документов и ресурсов', 'col-file': 'Файлы', 'col-status': 'Статус', 'col-update': 'Последнее обновление', 'file-1': 'Основой Закон — 7-е издание', 'status-1': 'Доступный', 'file-2': 'В мой 1-й год обучения в старшей школе', 'status-2': 'Доступный', 'file-3': 'В мой 2-й год обучения в старшей школе', 'status-3': 'Доступный', 'file-4': 'В мой 3-й год обучения в старшей школе', 'status-4': 'нет в наличии', 'file-5': 'Временные или специальные законы', 'status-5': 'Истекший', 'file-6': 'Номер 3: об использовании социальных сетей', 'status-6': 'Доступно / Архив', 'file-7': 'Телеканал «Интервидение»', 'status-7': 'Работа в процессе', 'note-1': '1. Некоторые данные отсутствуют. Исправлений нет.', 'author': 'Создано: Юя Камошита с ChatGPT', 'file-8': 'В средней школе', 'status-8': 'Ограниченный доступ', 'subcat-1': 'Результаты моих экзаменов' }
    };
    function setLang(lang) {
      currentLang = lang;
      const map = translations[lang] || translations['ru'];
      Object.keys(map).forEach(id => {
        const el = document.querySelector(`[data-translate="${id}"]`);
        if (el) setPreserveInlineChildren(el, map[id]);
      });
      document.querySelectorAll('[data-date]').forEach(el => {
        const iso = el.getAttribute('data-date');
        if (!iso || iso.trim() === '') return;
        const formatted = formatDisplayDate(iso, lang, false);
        setPreserveInlineChildren(el, formatted);
      });
      updateLastModified(lang);
      if (langSelect) langSelect.value = lang;
    }
    if (langSelect) {
      langSelect.addEventListener('change', (e) => {
        setLang(e.target.value);
      });
    }
    (function init() {
      const initial = langSelect ? langSelect.value || 'ru' : 'ru';
      setLang(initial);
    })();
  </script>
</body>

</html>